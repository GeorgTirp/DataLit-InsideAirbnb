2025-01-19 16:39:40,332 - INFO - Starting the XGBoost pipeline...
2025-01-19 16:39:40,332 - INFO - ----------------------------------
2025-01-19 16:39:40,332 - INFO - Parameters:
2025-01-19 16:39:40,332 - INFO - Data: /home/frieder/pCloudDrive/AirBnB_Daten/Preprocessed_data/germany_preprocessed/berlin/city_listings.csv
2025-01-19 16:39:40,332 - INFO - Target: price
2025-01-19 16:39:40,332 - INFO - Features: ['accommodates', 'bathrooms', 'bedrooms', 'beds', 'review_scores_value']
2025-01-19 16:39:40,332 - INFO - Outlier removal: False
2025-01-19 16:39:40,332 - INFO - CV: 5
2025-01-19 16:39:40,332 - INFO - Correlation threshold: 0.9
2025-01-19 16:39:40,332 - INFO - Save results: True
2025-01-19 16:39:40,332 - INFO - Additional custom features: ['distance_to_city_center', 'average_review_length']
2025-01-19 16:39:40,332 - INFO - Save path: results//test_run
2025-01-19 16:39:40,332 - INFO - Identifier: test_run
2025-01-19 16:39:40,332 - INFO - Random state: 42
2025-01-19 16:39:40,332 - INFO - ----------------------------------
2025-01-19 16:39:59,367 - INFO - Starting the XGBoost pipeline...
2025-01-19 16:39:59,367 - INFO - ----------------------------------
2025-01-19 16:39:59,367 - INFO - Parameters:
2025-01-19 16:39:59,367 - INFO - Data: /home/frieder/pCloudDrive/AirBnB_Daten/Preprocessed_data/germany_preprocessed/berlin/city_listings.csv
2025-01-19 16:39:59,367 - INFO - Target: price
2025-01-19 16:39:59,367 - INFO - Features: ['accommodates', 'bathrooms', 'bedrooms', 'beds', 'review_scores_value']
2025-01-19 16:39:59,367 - INFO - Outlier removal: False
2025-01-19 16:39:59,367 - INFO - CV: 5
2025-01-19 16:39:59,367 - INFO - Correlation threshold: 0.9
2025-01-19 16:39:59,367 - INFO - Save results: True
2025-01-19 16:39:59,367 - INFO - Additional custom features: ['distance_to_city_center', 'average_review_length']
2025-01-19 16:39:59,367 - INFO - Save path: results//test_run
2025-01-19 16:39:59,367 - INFO - Identifier: test_run
2025-01-19 16:39:59,367 - INFO - Random state: 42
2025-01-19 16:39:59,367 - INFO - ----------------------------------
2025-01-19 16:40:02,531 - INFO - Using the following features: ['accommodates', 'bathrooms', 'bedrooms', 'beds', 'review_scores_value']
2025-01-19 16:40:02,532 - INFO - Index(['Unnamed: 0', 'city', 'listing_url', 'scrape_id', 'last_scraped',
       'source', 'name', 'description', 'neighborhood_overview', 'picture_url',
       'host_id', 'host_url', 'host_name', 'host_since', 'host_location',
       'host_about', 'host_response_time', 'host_response_rate',
       'host_acceptance_rate', 'host_is_superhost', 'host_thumbnail_url',
       'host_picture_url', 'host_neighbourhood', 'host_listings_count',
       'host_total_listings_count', 'host_verifications',
       'host_has_profile_pic', 'host_identity_verified', 'neighbourhood',
       'neighbourhood_cleansed', 'neighbourhood_group_cleansed', 'latitude',
       'longitude', 'property_type', 'room_type', 'accommodates', 'bathrooms',
       'bathrooms_text', 'bedrooms', 'beds', 'amenities', 'price',
       'minimum_nights', 'maximum_nights', 'minimum_minimum_nights',
       'maximum_minimum_nights', 'minimum_maximum_nights',
       'maximum_maximum_nights', 'minimum_nights_avg_ntm',
       'maximum_nights_avg_ntm', 'calendar_updated', 'has_availability',
       'availability_30', 'availability_60', 'availability_90',
       'availability_365', 'calendar_last_scraped', 'number_of_reviews',
       'number_of_reviews_ltm', 'number_of_reviews_l30d', 'first_review',
       'last_review', 'review_scores_rating', 'review_scores_accuracy',
       'review_scores_cleanliness', 'review_scores_checkin',
       'review_scores_communication', 'review_scores_location',
       'review_scores_value', 'license', 'instant_bookable',
       'calculated_host_listings_count',
       'calculated_host_listings_count_entire_homes',
       'calculated_host_listings_count_private_rooms',
       'calculated_host_listings_count_shared_rooms', 'reviews_per_month',
       'comments', 'distance_to_city_center', 'average_review_length'],
      dtype='object')
2025-01-19 16:40:02,532 - INFO - ['accommodates', 'bathrooms', 'bedrooms', 'beds', 'review_scores_value', 'distance_to_city_center', 'average_review_length']
2025-01-19 16:40:02,533 - INFO - Features:
2025-01-19 16:40:02,540 - INFO -    accommodates  bathrooms  bedrooms  ...  review_scores_value  distance_to_city_center  average_review_length
0             4        2.0       2.0  ...                 4.76                 0.038602              46.179104
1             4        1.5       3.0  ...                 4.73                 0.038192              49.014706
2             2        1.0       0.0  ...                 4.47                 0.027089              40.882353
3             4        2.0       2.0  ...                 4.40                 0.031206              36.187500
4             2        1.5       1.0  ...                 4.77                 0.040879              46.898305

[5 rows x 7 columns]
2025-01-19 16:40:02,546 - INFO - ----------------------------------
2025-01-19 16:40:02,546 - INFO - Target:
2025-01-19 16:40:02,547 - INFO - 0    290.0
1    240.0
2    100.0
3    186.0
4     78.0
Name: price, dtype: float64
2025-01-19 16:40:02,547 - INFO - ----------------------------------
2025-01-19 16:40:02,547 - INFO - Number of samples: 8972
2025-01-19 16:40:02,547 - INFO - ----------------------------------
2025-01-19 16:40:08,597 - INFO - Preprocessed data saved as data/test_run_X.csv
2025-01-19 16:40:08,597 - INFO - Training the model...
2025-01-19 16:40:08,598 - INFO - ----------------------------------
2025-01-19 16:40:08,598 - INFO - Hyperparameter grid:
2025-01-19 16:40:08,598 - INFO - learning_rate: [0.001, 0.01, 0.1, 0.2]
2025-01-19 16:40:08,598 - INFO - ----------------------------------
2025-01-19 16:40:08,598 - INFO - ----------------------------------
2025-01-19 16:40:08,598 - INFO - Training fold [1/5]:
2025-01-19 16:40:11,389 - INFO - Mean Squared Error: 7869.502108965113 for fold [1/5]
2025-01-19 16:40:11,389 - INFO - Best hyperparameters: {'learning_rate': 0.1}
2025-01-19 16:40:11,389 - INFO - Estimating SHAP values...
2025-01-19 16:40:12,375 - INFO - SHAP values estimated for fold [1/5]
2025-01-19 16:40:12,375 - INFO - ----------------------------------
2025-01-19 16:40:12,375 - INFO - ----------------------------------
2025-01-19 16:40:12,375 - INFO - Training fold [2/5]:
2025-01-19 16:40:12,923 - INFO - Mean Squared Error: 7141.622404124395 for fold [2/5]
2025-01-19 16:40:12,924 - INFO - Best hyperparameters: {'learning_rate': 0.1}
2025-01-19 16:40:12,924 - INFO - Estimating SHAP values...
2025-01-19 16:40:13,754 - INFO - SHAP values estimated for fold [2/5]
2025-01-19 16:40:13,754 - INFO - ----------------------------------
2025-01-19 16:40:13,755 - INFO - ----------------------------------
2025-01-19 16:40:13,755 - INFO - Training fold [3/5]:
2025-01-19 16:40:14,338 - INFO - Mean Squared Error: 7620.6270516545865 for fold [3/5]
2025-01-19 16:40:14,338 - INFO - Best hyperparameters: {'learning_rate': 0.1}
2025-01-19 16:40:14,338 - INFO - Estimating SHAP values...
2025-01-19 16:40:15,178 - INFO - SHAP values estimated for fold [3/5]
2025-01-19 16:40:15,178 - INFO - ----------------------------------
2025-01-19 16:40:15,179 - INFO - ----------------------------------
2025-01-19 16:40:15,179 - INFO - Training fold [4/5]:
2025-01-19 16:40:15,732 - INFO - Mean Squared Error: 8634.266947489685 for fold [4/5]
2025-01-19 16:40:15,732 - INFO - Best hyperparameters: {'learning_rate': 0.1}
2025-01-19 16:40:15,732 - INFO - Estimating SHAP values...
2025-01-19 16:40:16,679 - INFO - SHAP values estimated for fold [4/5]
2025-01-19 16:40:16,679 - INFO - ----------------------------------
2025-01-19 16:40:16,679 - INFO - ----------------------------------
2025-01-19 16:40:16,679 - INFO - Training fold [5/5]:
2025-01-19 16:40:17,253 - INFO - Mean Squared Error: 8708.216604599247 for fold [5/5]
2025-01-19 16:40:17,253 - INFO - Best hyperparameters: {'learning_rate': 0.1}
2025-01-19 16:40:17,253 - INFO - Estimating SHAP values...
2025-01-19 16:40:18,109 - INFO - SHAP values estimated for fold [5/5]
2025-01-19 16:40:18,110 - INFO - ----------------------------------
2025-01-19 16:40:18,110 - INFO - All folds trained
2025-01-19 16:40:18,110 - INFO - Evaluating Model...
2025-01-19 16:40:18,122 - INFO - Pearson correlation: 0.6300553985470941, p-value: 0.0
2025-01-19 16:40:18,122 - INFO - Nested CV Mean Squared Error: 7994.847023366606
2025-01-19 16:40:18,138 - INFO - Results saved as results/test_run_results.csv
2025-01-19 16:40:20,120 - INFO - Mean SHAP values saved as results//test_run/test_run_mean_shap_values.npy
